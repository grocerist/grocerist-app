{% extends "templates/partials/base.j2" %}
{% block content %}

<div class="container">
    <h1 class="text-center">{{ object.name }}</h1>
    <div class="row">
        <div class="col">
            <h2><i class="bi bi-archiv"></i> Documents</h2>
            <ul>
                {% for x in object.documents %}
                <li><a href="document__{{ x.id }}.html">{{ x.value }}</a></li>
                {% endfor %}
            </ul>
        </div>
        <div class="col">
            <h2>Map</h2>
            <div id="map" style="height: 800px;"/>
        </div>
    </div>
</div>
{% endblock content %}
{% block scripts2 %}
{% if object.geonames_id %}
{% include "templates/partials/leaflet.j2" %}


<script>
    import { build_map_and_table } from "./html/js/make_map.js";
            let map_cfg = {
                initial_zoom: "5",
                initial_coordinates: [48.210033, 16.363449],
                //base_map_url: "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                base_map_url: "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
                json_url:
                    "https://raw.githubusercontent.com/NestroyCA/baserow-entities/main/json_dumps/places_tabulator.json",
                on_row_click_zoom: "11",
                div_id: "map",
                attribution:
                    '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: "abcd",
                maxZoom: 20,
            };
            let table_cfg = {
                maxHeight: "45vh",
                layout: "fitColumns",
                width: "100%",
                headerFilterLiveFilterDelay: 600,
                responsiveLayout: "collapse",
                paginationCounter: "rows",
                pagination: "local",
                paginationSize: 10,
                langs: {
                    default: {
                        pagination: {
                            counter: {
                                showing: "",
                                of: "of",
                                rows: "",
                            },
                        },
                    },
                },
            };
            build_map_and_table(map_cfg, table_cfg);
</script>



{% endif %}
{% endblock scripts2 %}